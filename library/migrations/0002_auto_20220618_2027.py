# Generated by Django 4.0.5 on 2022-06-18 20:27

from django.db import migrations
from django.contrib.auth.models import User


def create_super_user(apps, schema_editor):
    if not User.objects.filter(username="y42TestingUser").exists():
        uu = User.objects.create(
            username="y42TestingUser",
            is_staff=True,
            is_superuser=True,
            email="admin@example.com",
        )
        uu.set_password("y42TestUser@1044")
        uu.save()


def delete_super_user(apps, schema_editor):
    user = User.objects.filter(username="y42TestingUser")
    if user:
        user.delete()


class Migration(migrations.Migration):

    dependencies = [
        ("library", "0001_initial"),
    ]

    operations = [
        migrations.RunPython(create_super_user, delete_super_user),
    ]
